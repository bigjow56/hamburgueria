# üîß PROBLEMA: Modifica√ß√µes/Personaliza√ß√µes n√£o chegam no webhook

## üìã SITUA√á√ÉO ATUAL

‚úÖ **O que est√° funcionando:**
- Os dados b√°sicos do pedido chegam corretamente no webhook do N8N
- Produtos, pre√ßos, quantidades est√£o sendo enviados
- A comunica√ß√£o com o webhook est√° OK

‚ùå **O que est√° FALTANDO:**
- **As modifica√ß√µes/personaliza√ß√µes dos produtos N√ÉO est√£o sendo inclu√≠das no webhook**
- Ingredientes adicionados (ex: "+ Tomate (+R$ 1,50)")
- Ingredientes removidos (ex: "Sem Queijo duplo") 
- Adicionais escolhidos pelo cliente

## üéØ ESTRUTURA ATUAL DO WEBHOOK:
```json
{
  "pedido": {
    "id": "...",
    "itens": [
      {
        "produto_id": "8a7ea14a-f411-4066-9a6c-fe4b9fe34f4c",
        "produto_nome": "Burger Cl√°ssico",
        "quantidade": 1,
        "preco_unitario": 28.5,
        "preco_total": 28.5
      }
    ]
  }
}
```

## üöÄ ESTRUTURA DESEJADA:
```json
{
  "pedido": {
    "id": "...",
    "itens": [
      {
        "produto_id": "8a7ea14a-f411-4066-9a6c-fe4b9fe34f4c",
        "produto_nome": "Burger Cl√°ssico",
        "quantidade": 1,
        "preco_unitario": 28.5,
        "preco_total": 28.5,
        "modificacoes": [
          {
            "tipo": "adicionar",
            "ingrediente": "Tomate",
            "preco": 1.50
          },
          {
            "tipo": "remover", 
            "ingrediente": "Queijo duplo",
            "preco": 0.00
          },
          {
            "tipo": "adicionar",
            "ingrediente": "Queijo duplo",
            "preco": 5.00
          }
        ]
      }
    ]
  }
}
```

## üîç O QUE VOC√ä DEVE FAZER:

### 1. **ENCONTRE onde as modifica√ß√µes s√£o armazenadas:**
- Procure por vari√°veis que guardam personaliza√ß√µes
- Verifique localStorage/sessionStorage
- Olhe por arrays ou objetos que armazenam adicionais
- Busque por dados relacionados a ingredientes extras

### 2. **IDENTIFIQUE onde o webhook √© enviado:**
- Encontre a fun√ß√£o que envia dados para o webhook
- Localize onde os itens do pedido s√£o coletados
- Veja como os produtos s√£o estruturados antes do envio

### 3. **MODIFIQUE a coleta de dados:**
- Para cada item do pedido, colete tamb√©m suas modifica√ß√µes
- Inclua as personaliza√ß√µes no objeto do item
- Mantenha o formato consistente

### 4. **TESTE a implementa√ß√£o:**
- Fa√ßa um pedido com modifica√ß√µes
- Verifique se chegam no webhook
- Confirme que a estrutura est√° correta

## üí° DICAS DE ONDE PROCURAR:

**Arquivos relacionados a:**
- `checkout`, `carrinho`, `pedido`, `order`
- `webhook`, `api`, `enviar`, `finalizar`
- `personalizacao`, `modificacao`, `adicional`
- `ingrediente`, `extra`, `customizacao`

**Procure por:**
- Fun√ß√µes com nomes como `adicionarIngrediente()`, `removerIngrediente()`
- Arrays que armazenam modifica√ß√µes: `modificacoes[]`, `extras[]`, `personalizacoes[]`
- LocalStorage keys: `carrinho`, `pedido`, `modificacoes`
- Estados de componentes (React/Vue): `useState`, `data()`

**Elementos DOM:**
- Bot√µes de adicionar/remover ingredientes
- Checkboxes de personaliza√ß√µes
- Elementos com classes como `.extra`, `.adicional`, `.personalizacao`

## ‚ö†Ô∏è PONTOS IMPORTANTES:

1. **N√ÉO ALTERE** a interface do usu√°rio - ela j√° funciona
2. **N√ÉO QUEBRE** o envio atual - apenas adicione os dados das modifica√ß√µes
3. **MANTENHA** a compatibilidade com o formato atual
4. **TESTE** com pedidos que tenham e que n√£o tenham modifica√ß√µes

## üéØ RESULTADO ESPERADO:

Quando eu fizer um pedido como:
- Burger Cl√°ssico SEM queijo duplo + Tomate + Queijo duplo extra
- Burger Bacon sem modifica√ß√µes

O webhook deve receber:
```json
{
  "itens": [
    {
      "produto_nome": "Burger Cl√°ssico",
      "preco_total": 28.5,
      "modificacoes": [
        {"tipo": "remover", "ingrediente": "Queijo duplo", "preco": 0.00},
        {"tipo": "adicionar", "ingrediente": "Tomate", "preco": 1.50}, 
        {"tipo": "adicionar", "ingrediente": "Queijo duplo", "preco": 5.00}
      ]
    },
    {
      "produto_nome": "Burger Bacon", 
      "preco_total": 22.9,
      "modificacoes": []
    }
  ]
}
```

## üöÄ A√á√ÉO REQUERIDA:

1. **ANALISE** todo o c√≥digo para encontrar onde ficam as modifica√ß√µes
2. **IDENTIFIQUE** a fun√ß√£o de envio do webhook
3. **MODIFIQUE** para incluir as modifica√ß√µes nos itens
4. **TESTE** e confirme que funciona
5. **DOCUMENTE** o que foi alterado

---

**FOQUE em encontrar onde as personaliza√ß√µes s√£o armazenadas e como inclu√≠-las no payload do webhook. O resto j√° funciona perfeitamente!**